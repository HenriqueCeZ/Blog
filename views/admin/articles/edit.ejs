<%- include ("../../partials/header.ejs")%>
<%- include ("../../partials/navbar.ejs")%>
<div class="container">
    <h2>Articles Update</h2>
    <div class="color"> 
    <form  method = "POST" class="form-control" action="/articles/update"> <script>//crud insert</script>
        
       
      
        <input value ="<%=article.title%> " class="form-control" type="text" name="title" placeholder="edit" ><br>
        <textarea id="article" name="body" class="form-control" placeholder="Write new article..." ></textarea>
        <div class="select">
        <label for="">Select a Category:</label>
        <select name="category" class="form-control"  >
            <% category.forEach((categories)=>{ %>
                <% if(categories.id == article.categoryId) { %> 
                <option value="<%=categories.id%>" selected><%=categories.title%></option>
                <%} else {  %> 
                    <option value="<%=categories.id %>"><%=categories.title  %></option> 
                    <% } %> 

           <% }) %>
        </select><br>
    </div>
    <input type="hidden" name="id" value="<%=article.id%>">
        <div class="category-btn">
        <button class="category">
            New Article
            </button>
        </div>   

    </form>
</div>
</div>
<div id="content" style="display: none;">
    <%-article.body%>

</div>


<%- include ("../../partials/footer.ejs")%>
<script src="/tinymce/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector:"#article",
        plugins:[
            'advlist autolink link image lists print preview hr searchreplace wordcount fullscreen insertdatetime media save table paste emoticons'

        ],
        init_instance_callback: ()=>{
            tinymce.get("article").setContent($("#content").html())
        }   
    })


</script>